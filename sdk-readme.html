<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
 lang="en" dir="ltr">
<head>
	<style>
		a.interwiki {
		padding-left : 16px; 
		} 
		a.iw_wp { 
		} 
		a.iw_wpde { 
		} 
		a.iw_wpmeta { 
		} 
		a.iw_doku { 
		} 
		a.iw_sb { 
		} 
		a.iw_amazon { 
		} 
		a.iw_amazon_de { 
		} 
		a.iw_amazon_uk { 
		} 
		a.iw_phpfn { 
		} 
		a.iw_dokubug { 
		} 
		a.iw_coral { 
		} 
		a.iw_google { 
		} 
		a.iw_meatball { 
		} 
		a.iw_wiki { 
		} 
		a.mediafile { 
		padding-left : 18px; 
		padding-bottom : 1px; 
		} 
		a.mf_jpg { 
		} 
		a.mf_jpeg { 
		} 
		a.mf_gif { 
		} 
		a.mf_png { 
		} 
		a.mf_tgz { 
		} 
		a.mf_tar { 
		} 
		a.mf_gz { 
		} 
		a.mf_zip { 
		} 
		a.mf_rar { 
		} 
		a.mf_pdf { 
		} 
		a.mf_ps { 
		} 
		a.mf_doc { 
		} 
		a.mf_xls { 
		} 
		a.mf_ppt { 
		} 
		a.mf_rtf { 
		} 
		a.mf_swf { 
		} 
		a.mf_rpm { 
		} 
		a.mf_deb { 
		} 
		a.mf_sxw { 
		} 
		a.mf_sxc { 
		} 
		a.mf_sxi { 
		} 
		a.mf_sxd { 
		} 
		a.mf_odc { 
		} 
		a.mf_odf { 
		} 
		a.mf_odg { 
		} 
		a.mf_odi { 
		} 
		a.mf_odp { 
		} 
		a.mf_ods { 
		} 
		a.mf_odt { 
		} 
		div.clearer { 
		clear : both; 
		line-height : 0; 
		height : 0; 
		overflow : hidden; 
		} 
		div.no { 
		display : inline; 
		margin : 0; 
		padding : 0; 
		} 
		.hidden { 
		display : none; 
		} 
		div.error { 
		background : #fcc;
		color : #000; 
		border-bottom : 1px solid #faa; 
		font-size : 90%; 
		margin : 0; 
		padding-left : 3em; 
		overflow : hidden; 
		} 
		div.info { 
		background : #ccf;
		color : #000; 
		border-bottom : 1px solid #aaf; 
		font-size : 90%; 
		margin : 0; 
		padding-left : 3em; 
		overflow : hidden; 
		} 
		div.success { 
		background : #cfc;
		color : #000; 
		border-bottom : 1px solid #afa; 
		font-size : 90%; 
		margin : 0; 
		padding-left : 3em; 
		overflow : hidden; 
		} 
		div.notify { 
		background : #ffc;
		color : #000; 
		border-bottom : 1px solid #ffa; 
		font-size : 90%; 
		margin : 0; 
		padding-left : 3em; 
		overflow : hidden; 
		} 
		.medialeft { 
		float : left; 
		} 
		.mediaright { 
		float : right; 
		} 
		.mediacenter { 
		display : block; 
		margin-left : auto; 
		margin-right : auto; 
		} 
		.leftalign { 
		text-align : left; 
		} 
		.centeralign { 
		text-align : center; 
		} 
		.rightalign { 
		text-align : right; 
		} 
		em.u { 
		font-style : normal; 
		text-decoration : underline; 
		} 
		em em.u { 
		font-style : italic; 
		} 
		.code .br0 { 
		color : #6c6; 
		} 
		.code .co1 { 
		color : #808080; 
		font-style : italic; 
		} 
		.code .co2 { 
		color : #808080; 
		font-style : italic; 
		} 
		.code .co3 { 
		color : #808080; 
		} 
		.code .coMULTI { 
		color : #808080; 
		font-style : italic; 
		} 
		.code .es0 { 
		color : #009; 
		font-weight : bold; 
		} 
		.code .kw1 { 
		color : #b1b100; 
		} 
		.code .kw2 { 
		color : #000; 
		font-weight : bold; 
		} 
		.code .kw3 { 
		color : #006; 
		} 
		.code .kw4 { 
		color : #933; 
		} 
		.code .kw5 { 
		color : #00f; 
		} 
		.code .me1 { 
		color : #060; 
		} 
		.code .me2 { 
		color : #060; 
		} 
		.code .nu0 { 
		color : #c6c; 
		} 
		.code .re0 { 
		color : #00f; 
		} 
		.code .re1 { 
		color : #00f; 
		} 
		.code .re2 { 
		color : #00f; 
		} 
		.code .re3 { 
		color : #f33; 
		font-weight : bold; 
		} 
		.code .re4 { 
		color : #099; 
		} 
		.code .st0 { 
		color : #f00; 
		} 
		.code .sy0 { 
		color : #6c6; 
		} 
		#acl__manager label { 
		text-align : left; 
		font-weight : normal; 
		display : inline; 
		} 
		#acl__manager table { 
		margin-left : 10%; 
		width : 80%; 
		} 
		#config__manager div.success, #config__manager div.error, #config__manager div.info { 
		background-position : 0.5em 0%; 
		padding : 0.5em; 
		text-align : center; 
		} 
		#config__manager fieldset { 
		margin : 1em; 
		width : auto; 
		margin-bottom : 2em; 
		background-color : #dee7ec; 
		color : #000; 
		padding : 0 1em; 
		} 
		#config__manager legend { 
		font-size : 1.25em; 
		} 
		#config__manager table { 
		margin : 1em 0; 
		width : 100%; 
		} 
		#config__manager fieldset td { 
		text-align : left; 
		} 
		#config__manager fieldset td.value { 
		width : 30em; 
		} 
		#config__manager td input.edit { 
		width : 30em; 
		} 
		#config__manager td textarea.edit { 
		width : 27.5em; 
		height : 4em; 
		} 
		#config__manager tr .input, #config__manager tr input, #config__manager tr textarea, #config__manager tr select { 
		background-color : #fff; 
		color : #000; 
		} 
		#config__manager tr.default .input, #config__manager tr.default input, #config__manager tr.default textarea, #config__manager tr.default select, #config__manager .selectiondefault { 
		background-color : #cdf; 
		color : #000; 
		} 
		#config__manager tr.protected .input, #config__manager tr.protected input, #config__manager tr.protected textarea, #config__manager tr.protected select, #config__manager tr.protected .selection { 
		background-color : #fcc !important ; 
		color : #000 !important ; 
		} 
		#config__manager td.error { 
		background-color : red; 
		color : #000; 
		} 
		#config__manager .selection { 
		width : 14.8em; 
		float : left; 
		margin : 0 0.3em 2px 0; 
		} 
		#config__manager .selection label { 
		float : right; 
		width : 14em; 
		font-size : 90%; 
		} 
		* html #config__manager .selection label { 
		padding-top : 2px; 
		} 
		#config__manager .selection input.checkbox { 
		padding-left : 0.7em; 
		} 
		#config__manager .other { 
		clear : both; 
		padding-top : 0.5em; 
		} 
		#config__manager .other label { 
		padding-left : 2px; 
		font-size : 90%; 
		} 
		#plugin__manager h2 { 
		margin-left : 0; 
		} 
		#plugin__manager form { 
		display : block; 
		margin : 0; 
		padding : 0; 
		} 
		#plugin__manager legend { 
		display : none; 
		} 
		#plugin__manager fieldset { 
		width : auto; 
		} 
		#plugin__manager .button { 
		margin : 0; 
		} 
		#plugin__manager p, #plugin__manager label { 
		text-align : left; 
		} 
		#plugin__manager .hidden { 
		display : none; 
		} 
		#plugin__manager .new { 
		background : #dee7ec; 
		} 
		#plugin__manager input[disabled] { 
		color : #ccc; 
		border-color : #ccc; 
		} 
		#plugin__manager .pm_menu, #plugin__manager .pm_info { 
		margin-left : 0; 
		text-align : left; 
		} 
		#plugin__manager .pm_menu { 
		float : left; 
		width : 48%; 
		} 
		#plugin__manager .pm_info { 
		float : right; 
		width : 50%; 
		} 
		#plugin__manager .common fieldset { 
		margin : 0; 
		padding : 0 0 1em 0; 
		text-align : left; 
		border : none; 
		} 
		#plugin__manager .common label { 
		padding : 0 0 0.5em 0; 
		} 
		#plugin__manager .common input.edit { 
		width : 24em; 
		margin : 0.5em; 
		} 
		#plugin__manager .plugins fieldset { 
		color : #000; 
		background : #fff; 
		text-align : right; 
		border-top : none; 
		border-right : none; 
		border-left : none; 
		} 
		#plugin__manager .plugins fieldset.protected { 
		background : #fdd; 
		color : #000; 
		} 
		#plugin__manager .plugins fieldset.disabled { 
		background : #e0e0e0; 
		color : #a8a8a8; 
		} 
		#plugin__manager .plugins .legend { 
		color : #000; 
		background : inherit; 
		display : block; 
		margin : 0; 
		padding : 0; 
		font-size : 1em; 
		line-height : 1.4em; 
		font-weight : normal; 
		text-align : left; 
		float : left; 
		padding : 0; 
		clear : none; 
		} 
		#plugin__manager .plugins .button { 
		font-size : 95%; 
		} 
		#plugin__manager .plugins fieldset.buttons { 
		border : none; 
		} 
		#plugin__manager .plugins fieldset.buttons .button { 
		float : left; 
		} 
		#plugin__manager .pm_info h3 { 
		margin-left : 0; 
		} 
		#plugin__manager .pm_info dl { 
		margin : 1em 0; 
		padding : 0; 
		} 
		#plugin__manager .pm_info dt { 
		width : 6em; 
		float : left; 
		clear : left; 
		margin : 0; 
		padding : 0; 
		} 
		#plugin__manager .pm_info dd { 
		margin : 0 0 0 7em; 
		padding : 0; 
		background : none; 
		} 
		#plugin__manager .plugins .enable { 
		float : left; 
		width : auto; 
		margin-right : 0.5em; 
		} 
		#user__manager tr.disabled { 
		color : #6f6f6f; 
		background : #e4e4e4; 
		} 
		#user__manager tr.user_info { 
		vertical-align : top; 
		} 
		#user__manager div.edit_user { 
		width : 46%; 
		float : left; 
		} 
		#user__manager table { 
		margin-bottom : 1em; 
		} 
		#user__manager input.button[disabled] { 
		color : #ccc !important ; 
		border-color : #ccc !important ; 
		} 
		div.dokuwiki .header { 
		padding : 3px 0 0 2px; 
		} 
		div.dokuwiki .pagename { 
		float : left; 
		font-size : 200%; 
		font-weight : bolder; 
		color : #dee7ec; 
		text-align : left; 
		vertical-align : middle; 
		} 
		div.dokuwiki .pagename a { 
		color : #436976 !important ; 
		text-decoration : none !important ; 
		} 
		div.dokuwiki .logo { 
		float : right; 
		font-size : 220%; 
		font-weight : bolder; 
		text-align : right; 
		vertical-align : middle; 
		} 
		div.dokuwiki .logo a { 
		color : #dee7ec !important ; 
		text-decoration : none !important ; 
		font-variant : small-caps; 
		letter-spacing : 2pt; 
		} 
		div.dokuwiki .bar { 
		border-top : 1px solid #8cacbb; 
		border-bottom : 1px solid #8cacbb; 
		background : #dee7ec; 
		padding : 0.1em 0.15em; 
		clear : both; 
		} 
		div.dokuwiki .bar-left { 
		float : left; 
		} 
		div.dokuwiki .bar-right { 
		float : right; 
		text-align : right; 
		} 
		div.dokuwiki #bar__bottom { 
		margin-bottom : 3px; 
		} 
		div.dokuwiki div.meta { 
		clear : both; 
		margin-top : 1em; 
		color : #638c9c; 
		font-size : 70%; 
		} 
		div.dokuwiki div.meta div.user { 
		float : left; 
		} 
		div.dokuwiki div.meta div.doc { 
		text-align : right; 
		} 
		* { 
		padding : 0; 
		margin : 0; 
		} 
		body { 
		font : 80% "Lucida Grande", Verdana, Lucida, Helvetica, Arial, sans-serif; 
		background-color : #fff; 
		color : #000; 
		} 
		div.dokuwiki div.page { 
		margin : 4px 2em 0 1em; 
		text-align : justify; 
		} 
		div.dokuwiki table { 
		font-size : 100%; 
		} 
		div.dokuwiki img { 
		border : 0; 
		} 
		div.dokuwiki p, div.dokuwiki blockquote, div.dokuwiki table, div.dokuwiki pre { 
		margin : 0 0 1em 0; 
		} 
		div.dokuwiki hr { 
		border : 0; 
		border-top : 1px solid #8cacbb; 
		text-align : center; 
		height : 0; 
		} 
		div.dokuwiki div.nothing { 
		text-align : center; 
		margin : 2em; 
		} 
		div.dokuwiki form { 
		border : none; 
		display : inline; 
		} 
		div.dokuwiki label.block { 
		display : block; 
		text-align : right; 
		font-weight : bold; 
		} 
		div.dokuwiki label.simple { 
		display : block; 
		text-align : left; 
		font-weight : normal; 
		} 
		div.dokuwiki label.block input.edit { 
		width : 50%; 
		} 
		div.dokuwiki fieldset { 
		width : 300px; 
		text-align : center; 
		border : 1px solid #8cacbb; 
		padding : 0.5em; 
		margin : auto; 
		} 
		div.dokuwiki textarea.edit { 
		font-family : monospace; 
		font-size : 14px; 
		color : #000; 
		background-color : #fff; 
		border : 1px solid #8cacbb; 
		padding : 0.3em 0 0 0.3em; 
		width : 100%; 
		} 
		html > body div.dokuwiki textarea.edit { 
		background : #fff;
		} 
		div.dokuwiki input.edit, div.dokuwiki select.edit { 
		font-size : 100%; 
		border : 1px solid #8cacbb; 
		color : #000; 
		background-color : #fff; 
		vertical-align : middle; 
		margin : 1px; 
		padding : 0.2em 0.3em; 
		display : inline; 
		} 
		html > body div.dokuwiki input.edit, html > body div.dokuwiki select.edit { 
		background : #fff;
		} 
		div.dokuwiki select.edit { 
		padding : 0.1em 0; 
		} 
		div.dokuwiki input.missing { 
		font-size : 100%; 
		border : 1px solid #8cacbb; 
		color : #000; 
		background-color : #fcc; 
		vertical-align : middle; 
		margin : 1px; 
		padding : 0.2em 0.3em; 
		display : inline; 
		} 
		div.dokuwiki textarea.edit[disabled], div.dokuwiki textarea.edit[readonly], div.dokuwiki input.edit[disabled], div.dokuwiki input.edit[readonly], div.dokuwiki select.edit[disabled] { 
		background-color : #f5f5f5 !important ; 
		color : #666 !important ; 
		} 
		div.dokuwiki div.toolbar, div.dokuwiki div#wiki__editbar { 
		margin : 2px 0; 
		text-align : left; 
		} 
		div.dokuwiki div#size__ctl { 
		float : right; 
		width : 60px; 
		height : 2.7em; 
		} 
		div.dokuwiki #size__ctl img { 
		cursor : pointer; 
		} 
		div.dokuwiki div#wiki__editbar div.editButtons { 
		float : left; 
		padding : 0 1em 0.7em 0; 
		} 
		div.dokuwiki div#wiki__editbar div.summary { 
		float : left; 
		} 
		div.dokuwiki .nowrap { 
		white-space : nowrap; 
		} 
		div.dokuwiki div#draft__status { 
		float : right; 
		color : #638c9c; 
		} 
		div.dokuwiki input.button, div.dokuwiki button.button { 
		border : 1px solid #8cacbb; 
		color : #000; 
		background-color : #fff; 
		vertical-align : middle; 
		text-decoration : none; 
		font-size : 100%; 
		cursor : pointer; 
		margin : 1px; 
		padding : 0.125em 0.4em; 
		} 
		html > body div.dokuwiki input.button, html > body div.dokuwiki button.button { 
		background : #fff;
		} 
		* html div.dokuwiki input.button, * html div.dokuwiki button.button { 
		height : 1.8em; 
		} 
		div.dokuwiki div.secedit input.button { 
		border : 1px solid #8cacbb; 
		color : #000; 
		background-color : #fff; 
		vertical-align : middle; 
		text-decoration : none; 
		margin : 0; 
		padding : 0; 
		font-size : 10px; 
		cursor : pointer; 
		float : right; 
		display : inline; 
		} 
		div.dokuwiki div.pagenav { 
		margin : 1em 0 0 0; 
		} 
		div.dokuwiki div.pagenav-prev { 
		text-align : right; 
		float : left; 
		width : 49%; 
		} 
		div.dokuwiki div.pagenav-next { 
		text-align : left; 
		float : right; 
		width : 49%; 
		} 
		div.dokuwiki a:link, div.dokuwiki a:visited { 
		color : #436976; 
		text-decoration : none; 
		} 
		div.dokuwiki a:hover, div.dokuwiki a:active { 
		color : #000; 
		text-decoration : underline; 
		} 
		div.dokuwiki h1 a, div.dokuwiki h2 a, div.dokuwiki h3 a, div.dokuwiki h4 a, div.dokuwiki h5 a, div.dokuwiki a.nolink { 
		color : #000 !important ; 
		text-decoration : none !important ; 
		} 
		div.dokuwiki a.urlextern { 
		background : transparent;
		padding : 1px 0 1px 16px; 
		} 
		div.dokuwiki a.windows { 
		background : transparent;
		padding : 1px 0 1px 16px; 
		} 
		div.dokuwiki a.urlextern:link, div.dokuwiki a.windows:link, div.dokuwiki a.interwiki:link { 
		color : #436976; 
		} 
		div.dokuwiki a.urlextern:visited, div.dokuwiki a.windows:visited, div.dokuwiki a.interwiki:visited { 
		color : purple; 
		} 
		div.dokuwiki a.urlextern:hover, div.dokuwiki a.urlextern:active, div.dokuwiki a.windows:hover, div.dokuwiki a.windows:active, div.dokuwiki a.interwiki:hover, div.dokuwiki a.interwiki:active { 
		color : #000; 
		} 
		div.dokuwiki a.mail { 
		background : transparent;
		padding : 1px 0 1px 16px; 
		} 
		div.dokuwiki a.wikilink1 { 
		color : #090 !important ; 
		} 
		div.dokuwiki a.wikilink2 { 
		color : #f30 !important ; 
		text-decoration : none !important ; 
		border-bottom : 1px dashed #f30 !important ; 
		} 
		div.dokuwiki div.preview { 
		background-color : #f5f5f5; 
		margin : 0 0 0 2em; 
		padding : 4px; 
		border : 1px dashed #000; 
		} 
		div.dokuwiki div.breadcrumbs { 
		background-color : #f5f5f5; 
		color : #666; 
		font-size : 80%; 
		padding : 0 0 0 4px; 
		} 
		div.dokuwiki span.user { 
		color : #ccc; 
		font-size : 90%; 
		} 
		div.dokuwiki li.minor { 
		color : #666; 
		font-style : italic; 
		} 
		div.dokuwiki img.media { 
		margin : 3px; 
		} 
		div.dokuwiki img.medialeft { 
		border : 0; 
		float : left; 
		margin : 0 1.5em 0 0; 
		} 
		div.dokuwiki img.mediaright { 
		border : 0; 
		float : right; 
		margin : 0 0 0 1.5em; 
		} 
		div.dokuwiki img.mediacenter { 
		border : 0; 
		display : block; 
		margin : 0 auto; 
		} 
		div.dokuwiki img.middle { 
		vertical-align : middle; 
		} 
		div.dokuwiki acronym { 
		cursor : help; 
		border-bottom : 1px dotted #000; 
		} 
		div.dokuwiki h1, div.dokuwiki h2, div.dokuwiki h3, div.dokuwiki h4, div.dokuwiki h5 { 
		color : #000; 
		background-color : inherit; 
		font-size : 100%; 
		font-weight : normal; 
		margin : 0 0 1em 0; 
		padding : 0.5em 0 0 0; 
		border-bottom : 1px solid #8cacbb; 
		clear : left; 
		} 
		div.dokuwiki h1 { 
		font-size : 160%; 
		margin-left : 0; 
		font-weight : bold; 
		} 
		div.dokuwiki h2 { 
		font-size : 150%; 
		margin-left : 20px; 
		} 
		div.dokuwiki h3 { 
		font-size : 140%; 
		margin-left : 40px; 
		border-bottom : none; 
		font-weight : bold; 
		} 
		div.dokuwiki h4 { 
		font-size : 120%; 
		margin-left : 60px; 
		border-bottom : none; 
		font-weight : bold; 
		} 
		div.dokuwiki h5 { 
		font-size : 100%; 
		margin-left : 80px; 
		border-bottom : none; 
		font-weight : bold; 
		} 
		div.dokuwiki div.level1 { 
		margin-left : 3px; 
		} 
		div.dokuwiki div.level2 { 
		margin-left : 23px; 
		} 
		div.dokuwiki div.level3 { 
		margin-left : 43px; 
		} 
		div.dokuwiki div.level4 { 
		margin-left : 63px; 
		} 
		div.dokuwiki div.level5 { 
		margin-left : 83px; 
		} 
		div.dokuwiki ul { 
		line-height : 1.5em; 
		list-style-type : square; 
		list-style-image : none; 
		margin : 0 0 0.5em 1.5em; 
		color : #638c9c; 
		} 
		div.dokuwiki ol { 
		line-height : 1.5em; 
		list-style-image : none; 
		margin : 0 0 0.5em 1.5em; 
		color : #638c9c; 
		font-weight : bold; 
		} 
		div.dokuwiki .li { 
		color : #000; 
		font-weight : normal; 
		} 
		div.dokuwiki ol { 
		list-style-type : decimal; 
		} 
		div.dokuwiki ol ol { 
		list-style-type : upper-roman; 
		} 
		div.dokuwiki ol ol ol { 
		list-style-type : lower-alpha; 
		} 
		div.dokuwiki ol ol ol ol { 
		list-style-type : lower-greek; 
		} 
		div.dokuwiki li.open { 
		} 
		div.dokuwiki li.closed { 
		} 
		div.dokuwiki blockquote { 
		border-left : 2px solid #8cacbb; 
		padding-left : 3px; 
		} 
		div.dokuwiki pre { 
		font-size : 120%; 
		padding : 0.5em; 
		border : 1px dashed #8cacbb; 
		color : #000; 
		overflow : auto; 
		} 
		div.dokuwiki pre.pre { 
		background-color : #f7f9fa; 
		} 
		div.dokuwiki pre.code { 
		background-color : #f7f9fa; 
		} 
		div.dokuwiki code { 
		font-size : 120%; 
		} 
		div.dokuwiki pre.file { 
		background-color : #dee7ec; 
		} 
		div.dokuwiki table.inline { 
		background-color : #fff; 
		border-spacing : 0; 
		border-collapse : collapse; 
		} 
		div.dokuwiki table.inline th { 
		padding : 3px; 
		border : 1px solid #8cacbb; 
		background-color : #dee7ec; 
		} 
		div.dokuwiki table.inline td { 
		padding : 3px; 
		border : 1px solid #8cacbb; 
		} 
		div.dokuwiki div.toc { 
		margin : 1.2em 0 0 2em; 
		float : right; 
		width : 200px; 
		font-size : 80%; 
		clear : both; 
		} 
		div.dokuwiki div.tocheader { 
		border : 1px solid #8cacbb; 
		background-color : #dee7ec; 
		text-align : left; 
		font-weight : bold; 
		padding : 3px; 
		margin-bottom : 2px; 
		} 
		div.dokuwiki span.toc_open, div.dokuwiki span.toc_close { 
		border : 0.4em solid #dee7ec; 
		float : right; 
		display : block; 
		margin : 0.4em 3px 0 0; 
		} 
		div.dokuwiki span.toc_open span, div.dokuwiki span.toc_close span { 
		display : none; 
		} 
		div.dokuwiki span.toc_open { 
		margin-top : 0.4em; 
		border-top : 0.4em solid #000; 
		} 
		div.dokuwiki span.toc_close { 
		margin-top : 0; 
		border-bottom : 0.4em solid #000; 
		} 
		div.dokuwiki #toc__inside { 
		border : 1px solid #8cacbb; 
		background-color : #fff; 
		text-align : left; 
		padding : 0.5em 0 0.7em 0; 
		} 
		div.dokuwiki ul.toc { 
		list-style-type : none; 
		list-style-image : none; 
		line-height : 1.2em; 
		padding-left : 1em; 
		margin : 0; 
		} 
		div.dokuwiki ul.toc li { 
		background : transparent;
		padding-left : 0.4em; 
		} 
		div.dokuwiki ul.toc li.clear { 
		background-image : none; 
		padding-left : 0.4em; 
		} 
		div.dokuwiki a.toc:link, div.dokuwiki a.toc:visited { 
		color : #436976; 
		} 
		div.dokuwiki a.toc:hover, div.dokuwiki a.toc:active { 
		color : #000; 
		} 
		div.dokuwiki table.diff { 
		background-color : #fff; 
		width : 100%; 
		} 
		div.dokuwiki td.diff-blockheader { 
		font-weight : bold; 
		} 
		div.dokuwiki table.diff th { 
		border-bottom : 1px solid #8cacbb; 
		font-size : 120%; 
		width : 50%; 
		font-weight : normal; 
		text-align : left; 
		} 
		div.dokuwiki table.diff td { 
		font-family : monospace; 
		font-size : 100%; 
		} 
		div.dokuwiki td.diff-addedline { 
		background-color : #dfd; 
		} 
		div.dokuwiki td.diff-deletedline { 
		background-color : #ffb; 
		} 
		div.dokuwiki td.diff-context { 
		background-color : #f5f5f5; 
		} 
		div.dokuwiki table.diff td.diff-addedline strong, div.dokuwiki table.diff td.diff-deletedline strong { 
		color : red; 
		} 
		div.dokuwiki div.footnotes { 
		clear : both; 
		border-top : 1px solid #8cacbb; 
		padding-left : 1em; 
		margin-top : 1em; 
		} 
		div.dokuwiki div.fn { 
		font-size : 90%; 
		} 
		div.dokuwiki a.fn_top { 
		vertical-align : super; 
		font-size : 80%; 
		} 
		div.dokuwiki a.fn_bot { 
		vertical-align : super; 
		font-size : 80%; 
		font-weight : bold; 
		} 
		div.insitu-footnote { 
		font-size : 80%; 
		line-height : 1.2em; 
		border : 1px solid #8cacbb; 
		background-color : #f7f9fa; 
		text-align : left; 
		padding : 4px; 
		max-width : 40%; 
		} 
		* html .insitu-footnote pre.code, * html .insitu-footnote pre.file { 
		padding-bottom : 18px; 
		} 
		div.dokuwiki .search_result { 
		margin-bottom : 6px; 
		padding : 0 10px 0 30px; 
		} 
		div.dokuwiki .search_snippet { 
		color : #ccc; 
		font-size : 12px; 
		margin-left : 20px; 
		} 
		div.dokuwiki .search_sep { 
		color : #000; 
		} 
		div.dokuwiki .search_hit { 
		color : #000; 
		background-color : #ff9; 
		} 
		div.dokuwiki strong.search_hit { 
		font-weight : normal; 
		} 
		div.dokuwiki div.search_quickresult { 
		margin : 0 0 15px 30px; 
		padding : 0 10px 10px 0; 
		border-bottom : 1px dashed #8cacbb; 
		} 
		div.dokuwiki div.search_quickresult h3 { 
		margin : 0 0 1em 0; 
		font-size : 1em; 
		font-weight : bold; 
		} 
		div.dokuwiki ul.search_quickhits { 
		margin : 0 0 0.5em 1em; 
		} 
		div.dokuwiki ul.search_quickhits li { 
		margin : 0 1em 0 1em; 
		float : left; 
		width : 30%; 
		} 
		div.footerinc { 
		text-align : center; 
		} 
		.footerinc a img { 
		border : 0; 
		} 
		div.dokuwiki div.ajax_qsearch { 
		position : absolute; 
		right : 237px; 
		width : 200px; 
		display : none; 
		font-size : 80%; 
		line-height : 1.2em; 
		border : 1px solid #8cacbb; 
		background-color : #f7f9fa; 
		text-align : left; 
		padding : 4px; 
		} 
		button.toolbutton { 
		background-color : #fff; 
		padding : 0; 
		margin : 0 1px 0 0; 
		border : 1px solid #8cacbb; 
		cursor : pointer; 
		} 
		html > body button.toolbutton { 
		background : #fff;
		} 
		div.picker { 
		width : 250px; 
		border : 1px solid #8cacbb; 
		background-color : #dee7ec; 
		} 
		button.pickerbutton { 
		padding : 0; 
		margin : 0 1px 1px 0; 
		border : 0; 
		background-color : transparent; 
		font-size : 80%; 
		cursor : pointer; 
		} 
		div.dokuwiki a.spell_error { 
		color : #f00; 
		text-decoration : underline; 
		} 
		div.dokuwiki div#spell__suggest { 
		background-color : #fff; 
		padding : 2px; 
		border : 1px solid #000; 
		font-size : 80%; 
		display : none; 
		} 
		div.dokuwiki div#spell__result { 
		border : 1px solid #8cacbb; 
		color : #000; 
		font-size : 14px; 
		padding : 3px; 
		background-color : #f7f9fa; 
		display : none; 
		} 
		div.dokuwiki span.spell_noerr { 
		color : #093; 
		} 
		div.dokuwiki span.spell_wait { 
		color : #06c; 
		} 
		div.dokuwiki div.img_big { 
		float : left; 
		margin-right : 0.5em; 
		} 
		div.dokuwiki dl.img_tags dt { 
		font-weight : bold; 
		background-color : #dee7ec; 
		} 
		div.dokuwiki dl.img_tags dd { 
		background-color : #f5f5f5; 
		} 
		div.dokuwiki div.imagemeta { 
		color : #666; 
		font-size : 70%; 
		line-height : 95%; 
		} 
		div.dokuwiki div.imagemeta img.thumb { 
		float : left; 
		margin-right : 0.1em; 
		} 
		#media__manager { 
		height : 100%; 
		overflow : hidden; 
		} 
		#media__left { 
		width : 30%; 
		border-right : 1px solid #8cacbb; 
		height : 100%; 
		overflow : auto; 
		position : absolute; 
		left : 0; 
		} 
		#media__right { 
		width : 69.7%; 
		height : 100%; 
		overflow : auto; 
		position : absolute; 
		right : 0; 
		} 
		#media__manager h1 { 
		margin : 0; 
		padding : 0; 
		margin-bottom : 0.5em; 
		} 
		#media__tree img { 
		float : left; 
		padding : 0.5em 0.3em 0 0; 
		} 
		#media__tree ul { 
		list-style-type : none; 
		list-style-image : none; 
		} 
		#media__tree li { 
		clear : left; 
		list-style-type : none; 
		list-style-image : none; 
		} 
		* html #media__tree li { 
		border : 1px solid #fff; 
		} 
		#media__opts { 
		padding-left : 1em; 
		margin-bottom : 0.5em; 
		} 
		#media__opts input { 
		float : left; 
		position : absolute; 
		} 
		* html #media__opts input { 
		position : static; 
		} 
		#media__opts label { 
		display : block; 
		float : left; 
		margin-left : 30px; 
		} 
		* html #media__opts label { 
		margin-left : 10px; 
		} 
		#media__opts br { 
		clear : left; 
		} 
		#media__content img.load { 
		margin : 1em auto; 
		} 
		#media__content #scroll__here { 
		border : 1px dashed #8cacbb; 
		} 
		#media__content .odd { 
		background-color : #f7f9fa; 
		padding : 0.4em; 
		} 
		#media__content .even { 
		padding : 0.4em; 
		} 
		#media__content a.mediafile { 
		margin-right : 1.5em; 
		font-weight : bold; 
		} 
		#media__content div.detail { 
		padding : 0.3em 0 0.3em 2em; 
		} 
		#media__content div.detail div.thumb { 
		float : left; 
		width : 130px; 
		text-align : center; 
		margin-right : 0.4em; 
		} 
		#media__content img.btn { 
		vertical-align : text-bottom; 
		} 
		#media__content div.example { 
		color : #666; 
		margin-left : 1em; 
		} 
		#media__content div.upload { 
		font-size : 90%; 
		padding : 0 0.5em 0.5em 0.5em; 
		} 
		#media__content form.upload { 
		display : block; 
		border-bottom : 1px solid #8cacbb; 
		padding : 0 0.5em 1em 0.5em; 
		} 
		#media__content form.upload fieldset { 
		padding : 0; 
		margin : 0; 
		border : none; 
		width : auto; 
		} 
		#media__content form.upload p { 
		clear : left; 
		text-align : left; 
		padding : 0.25em 0; 
		margin : 0; 
		line-height : 1em; 
		} 
		#media__content form.upload label { 
		float : left; 
		width : 30%; 
		} 
		#media__content form.upload label.check { 
		float : none; 
		width : auto; 
		} 
		#media__content form.upload input.check { 
		margin-left : 30%; 
		} 
		#media__content form.meta { 
		display : block; 
		padding : 0 0 1em 0; 
		} 
		#media__content form.meta label { 
		display : block; 
		width : 25%; 
		float : left; 
		font-weight : bold; 
		margin-left : 1em; 
		clear : left; 
		} 
		#media__content form.meta .edit { 
		font : 100% "Lucida Grande", Verdana, Lucida, Helvetica, Arial, sans-serif; 
		float : left; 
		width : 70%; 
		padding-right : 0; 
		padding-left : 0.2em; 
		margin : 2px; 
		} 
		#media__content form.meta textarea.edit { 
		height : 8em; 
		} 
		#media__content form.meta div.metafield { 
		clear : left; 
		} 
		#media__content form.meta div.buttons { 
		clear : left; 
		margin-left : 20%; 
		padding-left : 1em; 
		}
	</style>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>foobar2000 SDK Readme</title>
	<link rel="stylesheet" type="text/css" href="sdk-readme.css" />
</head>
<body>
<div class="dokuwiki export">
<div class="toc">
<div class="tocheader toctoggle" id="toc__header">Table of Contents</div>
<div id="toc__inside">

<ul class="toc">
<li class="level1"><div class="li"><span class="li"><a href="#foobar2000_v1.4_beta_sdk_readme" class="toc">foobar2000 v1.4 beta SDK readme</a></span></div>
<ul class="toc">
<li class="level2"><div class="li"><span class="li"><a href="#beta_release_notice" class="toc">Beta release notice</a></span></div></li>
<li class="level2"><div class="li"><span class="li"><a href="#compatibility" class="toc">Compatibility</a></span></div></li>
<li class="level2"><div class="li"><span class="li"><a href="#microsoft_visual_studio_compatibility" class="toc">Microsoft Visual Studio compatibility</a></span></div>
<ul class="toc">
<li class="level3"><div class="li"><span class="li"><a href="#ill_behavior_of_visual_c_whole_program_optimization" class="toc">Ill behavior of Visual C whole program optimization</a></span></div></li>
<li class="level3"><div class="li"><span class="li"><a href="#virtual_memory_range_for_pch_exceeded_error" class="toc">&quot;virtual memory range for PCH exceeded&quot; error</a></span></div></li>
</ul>
</li>
<li class="level2"><div class="li"><span class="li"><a href="#version_1.4_notes" class="toc">Version 1.4 notes</a></span></div>
<ul class="toc">
<li class="level3"><div class="li"><span class="li"><a href="#namespace_cleanup" class="toc">Namespace cleanup</a></span></div></li>
<li class="level3"><div class="li"><span class="li"><a href="#decoders" class="toc">Decoders</a></span></div></li>
<li class="level3"><div class="li"><span class="li"><a href="#dynamic_runtime" class="toc">Dynamic runtime</a></span></div></li>
<li class="level3"><div class="li"><span class="li"><a href="#service_query" class="toc">service_query()</a></span></div></li>
</ul>
</li>
<li class="level2"><div class="li"><span class="li"><a href="#version_1.3_notes" class="toc">Version 1.3 notes</a></span></div></li>
<li class="level2"><div class="li"><span class="li"><a href="#basic_usage" class="toc">Basic usage</a></span></div></li>
<li class="level2"><div class="li"><span class="li"><a href="#structure_of_a_component" class="toc">Structure of a component</a></span></div>
<ul class="toc">
<li class="level3"><div class="li"><span class="li"><a href="#services" class="toc">Services</a></span></div></li>
<li class="level3"><div class="li"><span class="li"><a href="#entrypoint_services" class="toc">Entrypoint services</a></span></div></li>
<li class="level3"><div class="li"><span class="li"><a href="#service_extensions" class="toc">Service extensions</a></span></div></li>
<li class="level3"><div class="li"><span class="li"><a href="#autopointer_template_use" class="toc">Autopointer template use</a></span></div></li>
<li class="level3"><div class="li"><span class="li"><a href="#exception_use" class="toc">Exception use</a></span></div></li>
<li class="level3"><div class="li"><span class="li"><a href="#storing_configuration" class="toc">Storing configuration</a></span></div></li>
<li class="level3"><div class="li"><span class="li"><a href="#use_of_global_callback_services" class="toc">Use of global callback services</a></span></div></li>
</ul>
</li>
<li class="level2"><div class="li"><span class="li"><a href="#service_class_design_guidelines_advanced" class="toc">Service class design guidelines (advanced)</a></span></div>
<ul class="toc">
<li class="level3"><div class="li"><span class="li"><a href="#cross-dll_safety" class="toc">Cross-DLL safety</a></span></div></li>
<li class="level3"><div class="li"><span class="li"><a href="#entrypoint_service_efficiency" class="toc">Entrypoint service efficiency</a></span></div></li></ul>
</li></ul>
</li></ul>
</div>
</div>



<h1><a name="foobar2000_v1.4_beta_sdk_readme" id="foobar2000_v1.4_beta_sdk_readme">foobar2000 v1.4 beta SDK readme</a></h1>
<div class="level1">

</div>
<!-- SECTION "foobar2000 v1.4 beta SDK readme" [1-47] -->
<h2><a name="beta_release_notice" id="beta_release_notice">Beta release notice</a></h2>
<div class="level2">

<p>
 This <acronym title="Software Development Kit">SDK</acronym> is safe for general use. 
</p>

<p>
However please keep in mind that foobar2000 v1.4 is currently in beta and some of the new features may undergo changes before the final version is out.
</p>

</div>
<!-- SECTION "Beta release notice" [48-269] -->
<h2><a name="compatibility" id="compatibility">Compatibility</a></h2>
<div class="level2">

<p>
 Components built with this <acronym title="Software Development Kit">SDK</acronym> are compatible with foobar2000 1.3 and 1.4 series. They are not compatible with any earlier versions (will fail to load), and not guaranteed to be compatible with any future versions, though upcoming releases will aim to maintain compatibility as far as possible without crippling newly added functionality.
</p>

<p>
Note that components built with this <acronym title="Software Development Kit">SDK</acronym> can provide foobar2000 1.4 functionality while maintaining compatibility with the 1.3 series.
</p>

<p>
While this is not recommended, you can alter the targeted foobar2000 <acronym title="Application Programming Interface">API</acronym> level, edit <acronym title="Software Development Kit">SDK</acronym>/foobar2000.h and change the value of FOOBAR2000_TARGET_VERSION.
</p>

<p>
Currently supported values are 78 (for 1.3 series) and 79 (for 1.4 series).
</p>

<p>
<acronym title="Application Programming Interface">API</acronym> 78 components load in foobar2000 1.3 and 1.4; <acronym title="Application Programming Interface">API</acronym> 79 components load in 1.4 only.
</p>

</div>
<!-- SECTION "Compatibility" [270-1090] -->
<h2><a name="microsoft_visual_studio_compatibility" id="microsoft_visual_studio_compatibility">Microsoft Visual Studio compatibility</a></h2>
<div class="level2">

<p>
 This <acronym title="Software Development Kit">SDK</acronym> contains project files for Visual Studio 2017. 
</p>

</div>
<!-- SECTION "Microsoft Visual Studio compatibility" [1091-1197] -->
<h3><a name="ill_behavior_of_visual_c_whole_program_optimization" id="ill_behavior_of_visual_c_whole_program_optimization">Ill behavior of Visual C whole program optimization</a></h3>
<div class="level3">

<p>
Visual Studio versions from 2012 up produce incorrect output with default release settings on foobar2000 code - see <a href="http://www.hydrogenaud.io/forums/index.php?showtopic=108411" class="urlextern" title="http://www.hydrogenaud.io/forums/index.php?showtopic=108411"  rel="nofollow">forum thread</a> for details. You can mitigate this issue by compiling all affected code (foobar2000 <acronym title="Software Development Kit">SDK</acronym> code along with everything that uses foobar2000 <acronym title="Software Development Kit">SDK</acronym> classes) with /d2notypeopt option. This is set by default on project files provided with the <acronym title="Software Development Kit">SDK</acronym>; please make sure that you set this option on any projects of your own.
</p>

<p>
If you&#039;re aware of a better workaround - such as a source code change rather than setting an obscure compiler flag - please let us know; posting on the forum is preferred for the benefit of other users of this <acronym title="Software Development Kit">SDK</acronym>. 
</p>

</div>
<!-- SECTION "Ill behavior of Visual C whole program optimization" [1198-1977] -->
<h3><a name="virtual_memory_range_for_pch_exceeded_error" id="virtual_memory_range_for_pch_exceeded_error">&quot;virtual memory range for PCH exceeded&quot; error</a></h3>
<div class="level3">

<p>
By convention, foobar2000 code used to #include every single <acronym title="Software Development Kit">SDK</acronym> and utility header in a precompiled header (PCH) file. This became an issue with certain Visual Studio setups, as the PCH payload became extremely large.
</p>

<p>
The <acronym title="Software Development Kit">SDK</acronym> has been changed to reduce the amount of unnecessary code shoved into #included headers; errors of this type are yet to be seen with this version of the foobar2000 <acronym title="Software Development Kit">SDK</acronym> compiled under VS2017.
</p>

<p>
If you run into this error, we recommend the following steps:
</p>
<ul>
<li class="level1"><div class="li"> ATLHelpers: do not #include ATLHelpers/ATLHelpers.h - use ATLHelpersLean.h instead + additional ones on need-to-use basis.</div>
</li>
<li class="level1"><div class="li"> Helpers: do not #include helpers.h, #include individual ones as needed; most of the declare functionality needed for very specific components only.</div>
</li>
</ul>

</div>
<!-- SECTION "virtual memory range for PCH exceeded error" [1978-2795] -->
<h2><a name="version_1.4_notes" id="version_1.4_notes">Version 1.4 notes</a></h2>
<div class="level2">

</div>
<!-- SECTION "Version 1.4 notes" [2796-2825] -->
<h3><a name="namespace_cleanup" id="namespace_cleanup">Namespace cleanup</a></h3>
<div class="level3">

<p>
Some very old inconsistencies in the code have been cleaned up. Various bit_array classes are now in pfc namespace where they belong. Please use pfc::bit_array and so on in new code. If you have code that references bit_array classes without the pfc:: prefix, put “using pfc::bit_array” in your headers to work around it. 
</p>

</div>
<!-- SECTION "Namespace cleanup" [2826-3175] -->
<h3><a name="decoders" id="decoders">Decoders</a></h3>
<div class="level3">

</div>

<h4><a name="invoking_decoders" id="invoking_decoders">Invoking decoders</a></h4>
<div class="level4">

<p>
Each new decoder (input_entry) now provides a get_guid() and get_name() to allow user to choose the order in which they&#039;re invoked as well as disable individual installed decoders. Because of this, you are no longer supposed to walk input_entry instances in your code; however many existing components do so because this was the way things were expected to work in all past versions before 1.4.
</p>

<p>
In most cases there&#039;s nothing that you need to do about this, unless you have code that talks to input_entry instance methods directly. 
</p>

</div>

<h5><a name="input_manager" id="input_manager">input_manager</a></h5>
<div class="level5">

<p>
The proper way to instantiate any input related classes is to call input_manager; it manages opening of decoders respecting user&#039;s decoder merit settings. Calling any of the helper methods to open decoders / read tags / etc in the <acronym title="Software Development Kit">SDK</acronym> will call input_manager if available (v1.4) and fall back to walking input_entry services if not (v1.3). 
</p>

</div>

<h5><a name="input_entry_shim" id="input_entry_shim">input_entry shim</a></h5>
<div class="level5">

<p>
If your component targets <acronym title="Application Programming Interface">API</acronym> level lower than 79 (this <acronym title="Software Development Kit">SDK</acronym> comes configured for 78 by default), all your attempts to walk input_entry services return a shim service that redirects all your calls to input_manager. You cannot walk actual input_entry services.
</p>

<p>
This is to keep existing components working as intended.
</p>

<p>
If your component targets <acronym title="Application Programming Interface">API</acronym> level 79 (which means it won&#039;t load on v1.3), the shim is not installed as your component is expected to be aware of the new semantics. 
</p>

</div>

<h4><a name="implementing_decoders" id="implementing_decoders">Implementing decoders</a></h4>
<div class="level4">

<p>
Many new input methods have been added and some are mandatory for all code, in particular reporting of decoder name and GUID; existing code not providing these will not compile. However some of the methods now required to be provided by an input class are mundane and will be left blank in majority of implementations; an input_stubs class has been introduced to help with these. In past <acronym title="Software Development Kit">SDK</acronym> versions, your input class would not derive from another class; it is now recommended to derive from input_stubs to avoid having to supply mundane methods yourself. 
</p>

</div>

<h5><a name="specify_supported_interfaces" id="specify_supported_interfaces">Specify supported interfaces</a></h5>
<div class="level5">

<p>
You can now control which level of decoder <acronym title="Application Programming Interface">API</acronym> your instance supports from your input class instead of using multi parameter input_factory classes.
</p>

<p>
The input_stubs class provides these for your convenience: 
</p>
<pre class="code">
typedef input_decoder_v4 interface_decoder_t;
typedef input_info_reader interface_info_reader_t;
typedef input_info_writer interface_info_writer_t;
</pre>

<p>
 Override these in your input class to indicate supported interfaces.
</p>

<p>
For an example, if your input supports remove_tags(), indicate that you implement input_info_writer_v2: 
</p>
<pre class="code">
typedef input_info_writer_v2 interface_info_writer_t;
</pre>

</div>
<!-- SECTION "Decoders" [3176-5857] -->
<h3><a name="dynamic_runtime" id="dynamic_runtime">Dynamic runtime</a></h3>
<div class="level3">

<p>
As of version 1.4, foobar2000 is compiled with dynamic Visual C runtime and redistributes Visual C runtime libraries with the installer, putting them in the foobar2000 installation folder if necessary. The benefits of this are:  * Smaller component DLLs  * Increased limit of how many component DLLs can be loaded.
</p>

<p>
This <acronym title="Software Development Kit">SDK</acronym> comes configured for static runtime by default, for compatibility with foobar2000 version 1.3. If your component is for foobar2000 series 1.4 only, you can switch to using dynamic runtime instead - make sure to change the setting for all projects in your workspace. 
</p>

</div>
<!-- SECTION "Dynamic runtime" [5858-6474] -->
<h3><a name="service_query" id="service_query">service_query()</a></h3>
<div class="level3">

<p>
tl;dr if you don&#039;t know what this is about you probably don&#039;t care and your component isn&#039;t in any way affected by this.
</p>

<p>
The way service_query() is implemented has been redesigned for performance reasons - the old way ( implemented per interface class via FB2K_MAKE_SERVICE_INTERFACE macro ) resulted in every single class_guid from the entire <acronym title="Software Development Kit">SDK</acronym> being included in your DLL, due to strange behaviors of Microsoft linker.
</p>

<p>
The service_query() function itself is now provided by service_impl_* classes, so it&#039;s materialized only for services that your code implements and spawns.
</p>

<p>
The default implementation calls a newly added static method of handle_service_query(), implemented in service_base to check against all supported interfaces by walking derived class chain.
</p>

<p>
If you wish to override it, create a function with a matching signature in your class and it will be called instead: 
</p>
<pre class="code">
class myClass : public service_base {
public:
    static bool handle_service_query(service_ptr &amp; out, const GUID &amp; guid, myClass * in) {
        if ( guid == myClassGUID ) {
            out = in; return true;
        }
        return false;
    }
};
</pre>

</div>

<h4><a name="multi-inheritance" id="multi-inheritance">Multi-inheritance</a></h4>
<div class="level4">

<p>
The above change to service_query() implementation rules obviously breaks any existing code where one class inherits from multiple service classes and supplies a custom service_query().
</p>

<p>
While using multi inheritance is not recommended and very rarely done, a new template has been added to help with such cases: service_multi_inherit&lt;class1, class2&gt;.
</p>

<p>
You can use it to avoid having to supply service_query() code yourself and possibly change it if service_query() semantics change again in the future.
</p>

</div>
<!-- SECTION "service_query()" [6475-8185] -->
<h2><a name="version_1.3_notes" id="version_1.3_notes">Version 1.3 notes</a></h2>
<div class="level2">

<p>
foobar2000 version 1.3 uses different metadb behavior semantics than older versions, to greatly improve the performance of multithreaded operation by reducing the time spent within global metadb locks.
</p>

<p>
Any methods that: 
</p>
<ul>
<li class="level1"><div class="li"> Lock the metadb - database_lock() etc</div>
</li>
<li class="level1"><div class="li"> Retrieve direct pointers to metadb info - get_info_locked() style</div>
</li>
</ul>

<p>
 .. are now marked deprecated and implemented only for backwards compatibility; they should not be used in any new code.
</p>

<p>
It is recommended that you change your existing code using these to obtain track information using new get_info_ref() style methods for much better performance as these methods have minimal overhead and require no special care when used in multiple concurrent threads.
</p>

</div>
<!-- SECTION "Version 1.3 notes" [8186-8941] -->
<h2><a name="basic_usage" id="basic_usage">Basic usage</a></h2>
<div class="level2">

<p>
 Each component must link against:
</p>
<ul>
<li class="level1"><div class="li"> foobar2000_<acronym title="Software Development Kit">SDK</acronym> project (contains declarations of services and various service-specific helper code)</div>
</li>
<li class="level1"><div class="li"> foobar2000_component_client project (contains DLL entrypoint)</div>
</li>
<li class="level1"><div class="li"> shared.dll (various helper code, mainly win32 function wrappers taking UTF-8 strings)</div>
</li>
<li class="level1"><div class="li"> PFC (non-<acronym title="Operating System">OS</acronym>-specific helper class library)</div>
</li>
</ul>

<p>
Optionally, components can use helper libraries with various non-critical code that is commonly reused across various foobar2000 components:
</p>
<ul>
<li class="level1"><div class="li"> foobar2000_<acronym title="Software Development Kit">SDK</acronym>_helpers - a library of various helper code commonly used by foobar2000 components.</div>
</li>
<li class="level1"><div class="li"> foobar2000_ATL_helpers - another library of various helper code commonly used by foobar2000 components; requires WTL.</div>
</li>
</ul>

<p>
 Foobar2000_<acronym title="Software Development Kit">SDK</acronym>, foobar2000_component_client and PFC are included in sourcecode form; you can link against them by adding them to your workspace and using dependencies. To link against shared.dll, you must add “shared.lib” to linker input manually.
</p>

<p>
Component code should include the following header files:
</p>
<ul>
<li class="level1"><div class="li"> foobar2000.h from <acronym title="Software Development Kit">SDK</acronym> - do not include other headers from the <acronym title="Software Development Kit">SDK</acronym> directory directly, they&#039;re meant to be referenced by foobar2000.h only; it also includes PFC headers and shared.dll helper declaration headers.</div>
</li>
<li class="level1"><div class="li"> Optionally: helpers.h from helpers directory (foobar2000_<acronym title="Software Development Kit">SDK</acronym>_helpers project) - a library of various helper code commonly used by foobar2000 components.</div>
</li>
<li class="level1"><div class="li"> Optionally: ATLHelpers.h from ATLHelpers directory (foobar2000_ATL_helpers project) - another library of various helper code commonly used by foobar2000 components; requires WTL. Note that ATLHelpers.h already includes <acronym title="Software Development Kit">SDK</acronym>/foobar2000.h and helpers/helpers.h so you can replace your other include lines with a reference to ATLHelpers.h.</div>
</li>
</ul>

</div>
<!-- SECTION "Basic usage" [8942-10693] -->
<h2><a name="structure_of_a_component" id="structure_of_a_component">Structure of a component</a></h2>
<div class="level2">

<p>
 A component is a DLL that implements one or more entrypoint services and interacts with services provided by other components. 
</p>

</div>
<!-- SECTION "Structure of a component" [10694-10860] -->
<h3><a name="services" id="services">Services</a></h3>
<div class="level3">

<p>
 A service type is an interface class, deriving directly or indirectly from <code>service_base</code> class. A service type class must not have any data members; it can only provide virtual methods (to be overridden by service implementation), helper non-virtual methods built around virtual methods, static helper methods, and constants / enums. Each service interface class must have a static <code>class_guid</code> member, used for identification when enumerating services or querying for supported functionality. A service type declaration should declare a class with public virtual/helper/static methods, and use <code>FB2K_MAKE_SERVICE_INTERFACE()</code> / <code>FB2K_MAKE_SERVICE_INTERFACE_ENTRYPOINT()</code> macro to implement standard service behaviors for the class; additionally, <code>class_guid</code> needs to be defined outside class declaration (e.g. <code>const GUID someclass::class_guid = {&hellip;.};</code> ). Note that most of components will not declare their own service types, they will only implement existing ones declared in the <acronym title="Software Development Kit">SDK</acronym>.
</p>

<p>
A service implementation is a class derived from relevant service type class, implementing virtual methods declared by service type class. Note that service implementation class does not implement virtual methods declared by service_base; those are implemented by service type declaration framework (<code>service_query</code>) or by instantiation framework (<code>service_add_ref</code> / <code>service_release</code>). Service implementation classes are instantiated using <code>service_factory</code> templates in case of entrypoint services (see below), or using <code>service_impl_t</code> template and operator <code>new</code>: ”<code>myserviceptr = new service_impl_t&lt;myservice_impl&gt;(params);</code>”.
</p>

<p>
Each service object provides reference counter features and (<code>service_add_ref()</code> and <code>service_release()</code> methods) as well as a method to query for extended functionality (<code>service_query()</code> method). Those methods are implemented by service framework and should be never overridden by service implementations. These methods should also never be called directly - reference counter methods are managed by relevant autopointer templates, <code>service_query_t</code> function template should be used instead of calling <code>service_query</code> directly, to ensure type safety and correct type conversions.
</p>

</div>
<!-- SECTION "Services" [10861-13126] -->
<h3><a name="entrypoint_services" id="entrypoint_services">Entrypoint services</a></h3>
<div class="level3">

<p>
 An entrypoint service type is a special case of a service type that can be registered using <code>service_factory</code> templates, and then accessed from any point of service system (excluding DLL startup/shutdown code, such as code inside static object constructors/destructors). An entrypoint service type class must directly derive from <code>service_base</code>.
</p>

<p>
Registered entrypoint services can be accessed using:
</p>
<ul>
<li class="level1"><div class="li"> For services types with variable number of implementations registered: <code>service_enum_t&lt;T&gt;</code> template, <code>service_class_helper_t&lt;T&gt;</code> template, etc, e.g. <pre class="code cpp">service_enum_t&lt;someclass&gt; e; service_ptr_t&lt;someclass&gt; ptr; <span class="kw1">while</span><span class="br0">&#40;</span>e.<span class="me1">next</span><span class="br0">&#40;</span>ptr<span class="br0">&#41;</span><span class="br0">&#41;</span> ptr-&gt;dosomething<span class="br0">&#40;</span><span class="br0">&#41;</span>;</pre></div>
</li>
<li class="level1"><div class="li"> For services types with a single always-present implementation registered - such as core services like <code>playlist_manager</code> - using <code>someclass::get()</code>, e.g.: <pre class="code cpp"><span class="kw4">auto</span> api = someclass::<span class="me2">get</span><span class="br0">&#40;</span><span class="br0">&#41;</span>; api-&gt;dosomething<span class="br0">&#40;</span><span class="br0">&#41;</span>; api-&gt;dosomethingelse<span class="br0">&#40;</span><span class="br0">&#41;</span>;</pre></div>
</li>
<li class="level1"><div class="li"> Using per-service-type defined static helper functions, e.g. <code>someclass::g_dosomething()</code> - those use relevant service enumeration methods internally.</div>
</li>
</ul>

<p>
 An entrypoint service type must use <code>FB2K_MAKE_SERVICE_INTERFACE_ENTRYPOINT()</code> macro to implement standard entrypoint service behaviors, as opposed to all other service types that use <code>FB2K_MAKE_SERVICE_INTERFACE()</code> macro instead.
</p>

<p>
You can register your own entrypoint service implementations using either <code>service_factory_t</code> or <code>service_factory_single_t</code> template - the difference between the two is that the former instantiates the class on demand, while the latter keeps a single static instance and returns references to it when requested; the latter is faster but usable only for things that have no per-instance member data to maintain. Each <code>service_factory_t</code> / <code>service_factory_single_t</code> instance should be a static variable, such as: ”<code>static service_factory_t&lt;myclass&gt; g_myclass_factory;</code>”.
</p>

<p>
Certain service types require custom <code>service_factory</code> helper templates to be used instead of standard <code>service_factory_t</code> / <code>service_factory_single_t</code> templates; see documentation of specific service type for exact info about registering.
</p>

<p>
A typical entrypoint service implementation looks like this: 
</p>
<pre class="code cpp"><span class="kw2">class</span> myservice_impl : <span class="kw2">public</span> myservice <span class="br0">&#123;</span>
<span class="kw2">public</span>:
	<span class="kw4">void</span> dosomething<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>....<span class="br0">&#125;</span>;
	<span class="kw4">void</span> dosomethingelse<span class="br0">&#40;</span><span class="kw4">int</span> meh<span class="br0">&#41;</span> <span class="br0">&#123;</span>...<span class="br0">&#125;</span>;
<span class="br0">&#125;</span>;
<span class="kw4">static</span> service_factory_single_t&lt;myservice_impl&gt; g_myservice_impl_factory;</pre>
</div>
<!-- SECTION "Entrypoint services" [13127-15584] -->
<h3><a name="service_extensions" id="service_extensions">Service extensions</a></h3>
<div class="level3">

<p>
 Additional methods can be added to any service type, by declaring a new service type class deriving from service type class you want to extend. For example: 
</p>
<pre class="code cpp"><span class="kw2">class</span> myservice : <span class="kw2">public</span> service_base <span class="br0">&#123;</span> <span class="kw2">public</span>: <span class="kw2">virtual</span> <span class="kw4">void</span> dosomething<span class="br0">&#40;</span><span class="br0">&#41;</span> = <span class="nu0">0</span>; FB2K_MAKE_SERVICE_INTERFACE_ENTRYPOINT<span class="br0">&#40;</span>myservice<span class="br0">&#41;</span>; <span class="br0">&#125;</span>;
<span class="kw2">class</span> myservice_v2 : <span class="kw2">public</span> myservice <span class="br0">&#123;</span> <span class="kw2">public</span>: <span class="kw2">virtual</span> <span class="kw4">void</span> dosomethingelse<span class="br0">&#40;</span><span class="br0">&#41;</span> = <span class="nu0">0</span>; FB2K_MAKE_SERVICE_INTERFACE<span class="br0">&#40;</span>myservice_v2, myservice<span class="br0">&#41;</span>; <span class="br0">&#125;</span>;</pre>
<p>
 In such scenario, to query whether a myservice instance is a <code>myservice_v2</code> and to retrieve <code>myservice_v2</code> pointer, use <code>service_query</code> functionality: 
</p>
<pre class="code cpp">service_ptr_t&lt;myservice&gt; ptr;
<span class="br0">&#40;</span>...<span class="br0">&#41;</span>
service_ptr_t&lt;myservice_v2&gt; ptr_ex;
<span class="kw1">if</span> <span class="br0">&#40;</span>ptr-&gt;service_query_t<span class="br0">&#40;</span>ptr_ex<span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="coMULTI">/* ptr_ex is a valid pointer to myservice_v2 interface of our myservice instance */</span> <span class="br0">&#40;</span>...<span class="br0">&#41;</span> <span class="br0">&#125;</span>
<span class="kw1">else</span> <span class="br0">&#123;</span><span class="coMULTI">/* this myservice implementation does not implement myservice_v2 */</span> <span class="br0">&#40;</span>...<span class="br0">&#41;</span> <span class="br0">&#125;</span></pre>
</div>
<!-- SECTION "Service extensions" [15585-16524] -->
<h3><a name="autopointer_template_use" id="autopointer_template_use">Autopointer template use</a></h3>
<div class="level3">

<p>
 When performing most kinds of service operations, <code>service_ptr_t&lt;T&gt;</code> template should be used rather than working with service pointers directly; it automatically manages reference counter calls, ensuring that the service object is deleted when it is no longer referenced.
</p>

<p>
For convenience, all service classes have <code>myclass::ptr</code> typedef&#039;d to <code>service_ptr_t&lt;myclass&gt;</code>.
</p>

<p>
When working with pointers to core fb2k services, just use C++11 <code>auto</code> keyword and <code>someclass::get()</code>, e.g. <code>auto myAPI = playlist_manager::get();</code>
</p>

</div>
<!-- SECTION "Autopointer template use" [16525-17092] -->
<h3><a name="exception_use" id="exception_use">Exception use</a></h3>
<div class="level3">

<p>
 Most of <acronym title="Application Programming Interface">API</acronym> functions use C++ exceptions to signal failure conditions. All used exception classes must derive from <code>std::exception</code> (which <code>pfc::exception</code> is typedef&#039;d to); this design allows various instances of code to use single <code>catch()</code> line to get human-readable description of the problem to display.
</p>

<p>
Additionally, special subclasses of exceptions are defined for use in specific conditions, such as <code>exception_io</code> for I/O failures. As a result, you must provide an exception handler whenever you invoke any kind of I/O code that may fail, unless in specific case calling context already handles exceptions (e.g. input implementation code - any exceptions should be forwarded to calling context, since exceptions are a part of input <acronym title="Application Programming Interface">API</acronym>).
</p>

<p>
Implementations of global callback services such as <code>playlist_callback</code>, <code>playback_callback</code> or <code>library_callback</code> must not throw unhandled exceptions; behaviors in case they do are undefined (app termination is to be expected).
</p>

</div>
<!-- SECTION "Exception use" [17093-18110] -->
<h3><a name="storing_configuration" id="storing_configuration">Storing configuration</a></h3>
<div class="level3">

<p>
 In order to create your entries in the configuration file, you must instantiate some objects that derive from <code>cfg_var</code> class. Those can be either predefined classes (<code>cfg_int</code>, <code>cfg_string</code>, etc) or your own classes implementing relevant methods.
</p>

<p>
Each <code>cfg_var</code> instance has a GUID assigned, to identify its configuration file entry. The GUID is passed to its constructor (which implementations must take care of, typically by providing a constructor that takes a GUID and forwards it to <code>cfg_var</code> constructor).
</p>

<p>
Note that <code>cfg_var</code> objects can only be instantiated statically (either directly as static objects, or as members of other static objects). Additionally, you can create configuration data objects that can be accessed by other components, by implementing <code>config_object</code> service. Some standard configuration variables can be also accessed using <code>config_object</code> interface.
</p>

</div>
<!-- SECTION "Storing configuration" [18111-19046] -->
<h3><a name="use_of_global_callback_services" id="use_of_global_callback_services">Use of global callback services</a></h3>
<div class="level3">

<p>
 Multiple service classes presented by the <acronym title="Software Development Kit">SDK</acronym> allow your component to receive notifications about various events:
</p>
<ul>
<li class="level1"><div class="li"> file_operation_callback - tracking file move/copy/delete operations.</div>
</li>
<li class="level1"><div class="li"> library_callback - tracking Media Library content changes.</div>
</li>
<li class="level1"><div class="li"> metadb_io_callback - tracking tag read / write operations altering cached/displayed media information.</div>
</li>
<li class="level1"><div class="li"> play_callback - tracking playback related events.</div>
</li>
<li class="level1"><div class="li"> playback_statistics_collector - collecting information about played tracks.</div>
</li>
<li class="level1"><div class="li"> playlist_callback, playlist_callback_single - tracking playlist changes (the latter tracks only active playlist changes).</div>
</li>
<li class="level1"><div class="li"> playback_queue_callback - tracking playback queue changes.</div>
</li>
<li class="level1"><div class="li"> titleformat_config_callback - tracking changes of title formatting configuration.</div>
</li>
<li class="level1"><div class="li"> ui_drop_item_callback - filtering items dropped into the UI.</div>
</li>
</ul>

<p>
All of global callbacks operate only within main app thread, allowing easy cooperation with windows <acronym title="Graphical User Interface">GUI</acronym> - for an example, you perform playlist view window repainting directly from your playlist_callback implementation.
</p>

</div>

<h4><a name="global_callback_recursion_issues" id="global_callback_recursion_issues">Global callback recursion issues</a></h4>
<div class="level4">

<p>
There are restrictions on things that are legal to call from within global callbacks. For an example, you can&#039;t modify a playlist from inside a playlist callback, because there are other registered callbacks tracking playlist changes that haven&#039;t been notified about the change being currently processed yet.
</p>

<p>
You must not enter modal message loops from inside global callbacks, as those allow any unrelated code (queued messages, user input, etc.) to be executed, without being aware that a global callback is being processed. Certain global <acronym title="Application Programming Interface">API</acronym> methods such as metadb_io::load_info_multi or threaded_process::run_modal enter modal loops when called. Use main_thread_callback service to avoid this problem and delay execution of problematic code.
</p>

<p>
You should also avoid firing a cross-thread SendMessage() inside global callbacks as well as performing any operations that dispatch global callbacks when handling a message that was sent through a cross-thread SendMessage(). Doing so may result in rare unwanted recursions - SendMessage() call will block the calling thread and immediately process any incoming cross-thread SendMessage() messages. If you&#039;re handling a cross-thread SendMessage() and need to perform such operation, delay it using PostMessage() or main_thread_callback.
</p>

</div>
<!-- SECTION "Use of global callback services" [19047-21468] -->
<h2><a name="service_class_design_guidelines_advanced" id="service_class_design_guidelines_advanced">Service class design guidelines (advanced)</a></h2>
<div class="level2">

<p>
 This chapter describes things you should keep on your mind when designing your own service type classes. Since 99% of components will only implement existing service types rather than adding their own cross-DLL-communication protocols, you can probably skip reading this chapter.
</p>

</div>
<!-- SECTION "Service class design guidelines (advanced)" [21469-21805] -->
<h3><a name="cross-dll_safety" id="cross-dll_safety">Cross-DLL safety</a></h3>
<div class="level3">

<p>
 It is important that all function parameters used by virtual methods of services are cross-DLL safe (do not depend on compiler-specific or runtime-specific behaviors, so no unexpected behaviors occur when calling code is built with different compiler/runtime than callee). To achieve this, any classes passed around must be either simple objects with no structure that could possibly vary with different compilers/runtimes (i.e. make sure that any memory blocks are freed on the side that allocated them); easiest way to achieve this is to reduce all complex data objects or classes passed around to interfaces with virtual methods, with implementation details hidden from callee. For an example, use <code>pfc::string_base&amp;</code> as parameter to a function that is meant to return variable-length strings.
</p>

</div>
<!-- SECTION "Cross-DLL safety" [21806-22633] -->
<h3><a name="entrypoint_service_efficiency" id="entrypoint_service_efficiency">Entrypoint service efficiency</a></h3>
<div class="level3">

<p>
 When designing an entrypoint service interface meant to have multiple different implementations, you should consider making it possible for all its implementations to use <code>service_factory_single_t</code> (i.e. no per-instance member data); by e.g. moving functionality that needs multi-instance operation to a separate service type class that is created on-demand by one of entrypoint service methods. For example: 
</p>
<pre class="code cpp"><span class="kw2">class</span> myservice : <span class="kw2">public</span> service_base <span class="br0">&#123;</span>
<span class="kw2">public</span>:
	<span class="co1">//this method accesses per-instance member data of the implementation class</span>
	<span class="kw2">virtual</span> <span class="kw4">void</span> workerfunction<span class="br0">&#40;</span><span class="kw4">const</span> <span class="kw4">void</span> * p_databuffer,t_size p_buffersize<span class="br0">&#41;</span> = <span class="nu0">0</span>;
	<span class="co1">//this method is used to determine which implementation can be used to process specific data stream.</span>
	<span class="kw2">virtual</span> <span class="kw4">bool</span> queryfunction<span class="br0">&#40;</span><span class="kw4">const</span> <span class="kw4">char</span> * p_dataformat<span class="br0">&#41;</span> = <span class="nu0">0</span>;
&nbsp;
	FB2K_MAKE_SERVICE_INTERFACE_ENTRYPOINT<span class="br0">&#40;</span>myservice<span class="br0">&#41;</span>;
<span class="br0">&#125;</span>;
<span class="br0">&#40;</span>...<span class="br0">&#41;</span>
service_ptr_t&lt;myservice&gt; findservice<span class="br0">&#40;</span><span class="kw4">const</span> <span class="kw4">char</span> * p_dataformat<span class="br0">&#41;</span> <span class="br0">&#123;</span>
	service_enum_t&lt;myservice&gt; e; service_ptr_t&lt;myservice&gt; ptr;
	<span class="co1">//BOTTLENECK, this dynamically instantiates the service for each query.</span>
	<span class="kw1">while</span><span class="br0">&#40;</span>e.<span class="me1">next</span><span class="br0">&#40;</span>ptr<span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
		<span class="kw1">if</span> <span class="br0">&#40;</span>ptr-&gt;queryfunction<span class="br0">&#40;</span>p_dataformat<span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="kw1">return</span> ptr;
	<span class="br0">&#125;</span>
	throw exception_io_data<span class="br0">&#40;</span><span class="br0">&#41;</span>;
<span class="br0">&#125;</span></pre>
<p>
.. should be changed to:
</p>
<pre class="code cpp"><span class="co1">//no longer an entrypoint service - use myservice::instantiate to get an instance instead.</span>
<span class="kw2">class</span> myservice_instance : <span class="kw2">public</span> service_base <span class="br0">&#123;</span>
<span class="kw2">public</span>:
	<span class="kw2">virtual</span> <span class="kw4">void</span> workerfunction<span class="br0">&#40;</span><span class="kw4">const</span> <span class="kw4">void</span> * p_databuffer,t_size p_buffersize<span class="br0">&#41;</span> = <span class="nu0">0</span>;
	FB2K_MAKE_SERVICE_INTERFACE<span class="br0">&#40;</span>myservice_instance,service_base<span class="br0">&#41;</span>;
<span class="br0">&#125;</span>;
&nbsp;
<span class="kw2">class</span> myservice : <span class="kw2">public</span> service_base <span class="br0">&#123;</span>
<span class="kw2">public</span>:
	<span class="co1">//this method is used to determine which implementation can be used to process specific data stream.</span>
	<span class="kw2">virtual</span> <span class="kw4">bool</span> queryfunction<span class="br0">&#40;</span><span class="kw4">const</span> <span class="kw4">char</span> * p_dataformat<span class="br0">&#41;</span> = <span class="nu0">0</span>;
	<span class="kw2">virtual</span> service_ptr_t&lt;myservice_instance&gt; instantiate<span class="br0">&#40;</span><span class="br0">&#41;</span> = <span class="nu0">0</span>;
	FB2K_MAKE_SERVICE_INTERFACE_ENTRYPOINT<span class="br0">&#40;</span>myservice<span class="br0">&#41;</span>;
<span class="br0">&#125;</span>;
&nbsp;
template&lt;typename t_myservice_instance_impl&gt;
<span class="kw2">class</span> myservice_impl_t : <span class="kw2">public</span> myservice <span class="br0">&#123;</span>
<span class="kw2">public</span>:
	<span class="co1">//implementation of myservice_instance must provide static bool g_queryformatfunction(const char*);</span>
	<span class="kw4">bool</span> queryfunction<span class="br0">&#40;</span><span class="kw4">const</span> <span class="kw4">char</span> * p_dataformat<span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> t_myservice_instance_impl::<span class="me2">g_queryfunction</span><span class="br0">&#40;</span>p_dataformat<span class="br0">&#41;</span>;<span class="br0">&#125;</span>
	service_ptr_t&lt;myservice_instance&gt; instantiate<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> <span class="kw3">new</span> service_impl_t&lt;t_myservice_instance_impl&gt;<span class="br0">&#40;</span><span class="br0">&#41;</span>;<span class="br0">&#125;</span>
<span class="br0">&#125;</span>;
&nbsp;
template&lt;typename t_myservice_instance_impl&gt; <span class="kw2">class</span> myservice_factory_t :
	<span class="kw2">public</span> service_factory_single_t&lt;myservice_impl_t&lt;t_myservice_instance_impl&gt; &gt; <span class="br0">&#123;</span><span class="br0">&#125;</span>;
<span class="co1">//usage: static myservice_factory_t&lt;myclass&gt; g_myclass_factory;</span>
&nbsp;
<span class="br0">&#40;</span>...<span class="br0">&#41;</span>
&nbsp;
service_ptr_t&lt;myservice_instance&gt; findservice<span class="br0">&#40;</span><span class="kw4">const</span> <span class="kw4">char</span> * p_dataformat<span class="br0">&#41;</span> <span class="br0">&#123;</span>
	service_enum_t&lt;myservice&gt; e; service_ptr_t&lt;myservice&gt; ptr;
	<span class="co1">//no more bottleneck, enumerated service does not perform inefficient operations when requesting an instance.</span>
	<span class="kw1">while</span><span class="br0">&#40;</span>e.<span class="me1">next</span><span class="br0">&#40;</span>ptr<span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
		<span class="co1">//&quot;inefficient&quot; part is used only once, with implementation that actually supports what we request.</span>
		<span class="kw1">if</span> <span class="br0">&#40;</span>ptr-&gt;queryfunction<span class="br0">&#40;</span>p_dataformat<span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="kw1">return</span> ptr-&gt;instantiate<span class="br0">&#40;</span><span class="br0">&#41;</span>;
	<span class="br0">&#125;</span>
	throw exception_io_data<span class="br0">&#40;</span><span class="br0">&#41;</span>;
<span class="br0">&#125;</span></pre>
</div>
<!-- SECTION "Entrypoint service efficiency" [22634-] --></div>
</body>
</html>
